****** BUILD Of 'MQTTTemp' (29.05.2021 17:50:56)


****** EVENT HANDLERS
                                                                        0:    0x0058   Address Priority 0 Event.   Code for 'Boot' starts at 88.
                                                                        1:    0x0063   Address Priority 1 Event.   Code for 'PublishTemp' starts at 99.
                                                                        2:    0x0000   Address Priority 2 Event.   No Event defined.
                                                                        3:    0x0000   Address Priority 3 Event.   No Event defined.
                                                                        4:    0x0000   Address Priority 4 Event.   No Event defined.
                                                                        5:    0x0000   Address Priority 5 Event.   No Event defined.
                                                                        6:    0x0000   Address Priority 6 Event.   No Event defined.
                                                                        7:    0x0000   Address Priority 7 Event.   No Event defined.
                                                                        8:    0x0000   Address Priority 8 Event.   No Event defined.
                                                                        9:    0x0000   Address Priority 9 Event.   No Event defined.
                                                                        10:   0x0000   Address Priority 10 Event.  No Event defined.
                                                                        11:   0x0000   Address Priority 11 Event.  No Event defined.
                                                                        12:   0x0000   Address Priority 12 Event.  No Event defined.
                                                                        13:   0x0000   Address Priority 13 Event.  No Event defined.
                                                                        14:   0x0000   Address Priority 14 Event.  No Event defined.
                                                                        15:   0x0000   Address Priority 15 Event.  No Event defined.
                                                                        16:   0x0000   Address Priority 16 Event.  No Event defined.
                                                                        17:   0x0000   Address Priority 17 Event.  No Event defined.
                                                                        18:   0x0000   Address Priority 18 Event.  No Event defined.
                                                                        19:   0x0000   Address Priority 19 Event.  No Event defined.
                                                                        20:   0x0000   Address Priority 20 Event.  No Event defined.
                                                                        21:   0x0000   Address Priority 21 Event.  No Event defined.
                                                                        22:   0x0000   Address Priority 22 Event.  No Event defined.
                                                                        23:   0x0000   Address Priority 23 Event.  No Event defined.
                                                                        24:   0x0000   Address Priority 24 Event.  No Event defined.
                                                                        25:   0x0000   Address Priority 25 Event.  No Event defined.
                                                                        26:   0x0000   Address Priority 26 Event.  No Event defined.
                                                                        27:   0x0000   Address Priority 27 Event.  No Event defined.
                                                                        28:   0x0000   Address Priority 28 Event.  No Event defined.
                                                                        29:   0x0000   Address Priority 29 Event.  No Event defined.
                                                                        30:   0x0000   Address Priority 30 Event.  No Event defined.
                                                                        31:   0x0000   Address Priority 31 Event.  No Event defined.

****** RUNTIME INFORMATION
                                                                        32:   0x00B0   ScriptSizeLS (Size of the code in 2-byte instructions = 176)
                                                                        33:   0x0000   CodeSizeMS (Size of the code in 2-byte instructions = 176)
                                                                        34:   0x0003   CodeSizeInBlocks = 3
                                                                        35:   0x0001   StringSizeInBlocks = 1
                                                                        36:   0x0000   Reserved
                                                                        37:   0x0000   Reserved
                                                                        38:   0x3B80   Compile Date and Time 2021-05-29 17:50:56
                                                                        39:   0x2845   Compile Date and Time 2021-05-29 17:50:56
                                                                        40:   0x0000   Reserved
                                                                        41:   0x0000   Reserved
                                                                        42:   0x0000   Reserved
                                                                        43:   0x0000   Reserved
                                                                        44:   0x0000   Reserved
                                                                        45:   0x0000   PinMode Pin0=NotUsed  Pin1=NotUsed
                                                                        46:   0x0000   PinMode Pin2=NotUsed  Pin3=NotUsed
                                                                        47:   0x0000   PinMode Pin4=NotUsed  Pin5=NotUsed
                                                                        48:   0x0000   PinMode Pin6=NotUsed  Pin7=NotUsed
                                                                        49:   0x0000   PinMode Pin8=NotUsed   Pin9=NotUsed
                                                                        50:   0x0000   PinMode Pin10=NotUsed   Pin11=NotUsed
                                                                        51:   0x0000   PinMode Pin12=NotUsed   Pin13=NotUsed
                                                                        52:   0x0000   PinMode Pin14=NotUsed   Pin15=NotUsed
                                                                        53:   0x0000   PinMode Pin16=NotUsed   Pin17=NotUsed
                                                                        54:   0x0000   PinMode Pin18=NotUsed   Pin19=NotUsed
                                                                        55:   0x0000   PinMode Pin20=NotUsed   Pin21=NotUsed
                                                                        56:   0x0000   PinMode Pin22=NotUsed   Pin23=NotUsed
                                                                        57:   0x0000   Reserved
                                                                        58:   0x0000   Reserved
                                                                        59:   0x0000   Reserved
                                                                        60:   0x0000   Reserved
                                                                        61:   0x1800   IdleThread EntryPoint ValTypParams=0, RefTypParams=0
                                                                        62:   0x0015   SystemIdle
                                                                        63:   0x5002   BranchBack 62

****** CLASS INFORMATION
                                                                        64:   0x0049   Class Descriptor for class 'Global'. Next Descriptor at 73.
                                                                        65:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                        66:   0x0000   Offset of RefObject data.(0).
                                                                        67:   0x0000   Size of RefObject data.(0).
                                                                        68:   0x000C   Size of all data.(12).
                                                                        69:   0x6C47   Part of the class name 'Global'.
                                                                        70:   0x626F   Part of the class name 'Global'.
                                                                        71:   0x6C61   Part of the class name 'Global'.
                                                                        72:   0x0000   Part of the class name 'Global'.
                                                                        73:   0x0053   Class Descriptor for class 'MQTTTemp'. Next Descriptor at 83.
                                                                        74:   0x0000   Base Class 'Object' Value represent a pointer if >= 64 (0x40) or ClassType if < 64 (0).
                                                                        75:   0x0000   Offset of RefObject data.(0).
                                                                        76:   0x0000   Size of RefObject data.(0).
                                                                        77:   0x0000   Size of all data.(0).
                                                                        78:   0x514D   Part of the class name 'MQTTTemp'.
                                                                        79:   0x5454   Part of the class name 'MQTTTemp'.
                                                                        80:   0x6554   Part of the class name 'MQTTTemp'.
                                                                        81:   0x706D   Part of the class name 'MQTTTemp'.
                                                                        82:   0x0000   Part of the class name 'MQTTTemp'.
                                                                        83:   0x0000   End Of Class Data.

****** APPLIACTION STATEMENTS
*************************************************************************************************************

000005  Class MQTTTemp                                                  84:   0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

                                                                        86:   0x0001                           EventType=Boot
                                                                        87:   0x0700                           EventCategory=Interrupt
000006      Shared Event Boot()                                         88:   0x1800   EntryPoint              ValTypParams=0, RefTypParams=0

000007          Lplan.SetLowPowerMode(600)                              89:   0x8258   PushConstU10            600 (0x0258)
                                                                        90:   0x8000   PushConstU10            0 (0x0000)
                                                                        91:   0x0106   LplanSetConnectionMode  

000008          Lplan.SetBeaconTime(60000000)                           92:   0x0110   PushConstI32            60000000 (0x03938700)
                                                                        93:   0x8700                           
                                                                        94:   0x0393                           
                                                                        95:   0x0108   LplanSetBeaconTime      

000009      End Event                                                   96:   0x0091   Return                  

000010      
                                                                        97:   0x0001                           TimeValue=1
                                                                        98:   0x0400                           EventCategory=TimeInMinutes
000011      Shared Event PublishTemp() RaiseEvent Every 1 Minutes       99:   0x1800   EntryPoint              ValTypParams=0, RefTypParams=0
                                                                        100:  0xE085   AllocateStackSpace      ValTypeSize=4, RefTypeSize=5

000012          Dim payload As ListOfByte = New ListOfByte()            101:  0x800C   PushConstU10            12 (0x000C)
                                                                        102:  0x0010   ClassNew                
                                                                        103:  0x9400   PopLocalRef             payload

000013          Dim Tsensor As I2c
000014          Dim temp As Integer
000015          Dim strTemp As String
000016          Dim battV As Short
000017          Dim strbattV As String
000018          Dim bConv As Byte
000019          Dim conv As Integer
000020          
000021          Tsensor = I2c.Create(250000, Pin.SCL, Pin.SDA, 0x48)    104:  0x0110   PushConstI32            250000 (0x0003D090)
                                                                        105:  0xD090                           
                                                                        106:  0x0003                           
                                                                        107:  0x800D   PushConstU10            13 (0x000D)
                                                                        108:  0x800E   PushConstU10            14 (0x000E)
                                                                        109:  0x8048   PushConstU10            72 (0x0048)
                                                                        110:  0x803B   PushConstU10            59 (0x003B)
                                                                        111:  0x0010   ClassNew                
                                                                        112:  0x9401   PopLocalRef             Tsensor

000022          
000023          // Power up the sensor and give it some time to settle
000024          Device.EnableTempSensor()                               113:  0x8001   PushConstU10            1 (0x0001)
                                                                        114:  0x00F0   DeviceEnableTemp        

000025          Thread.Sleep(40000) // See page 13 of the datasheet     115:  0x0110   PushConstI32            40000 (0x00009C40)
                                                                        116:  0x9C40                           
                                                                        117:  0x0000                           
                                                                        118:  0x00D5   ThreadSleep             
                                                                        119:  0xE420   FreeStackSpace          ValTypeSize=1, RefTypeSize=0

000026          
000027          
000028          // Read the sensor (only 1 bytes to read
000029          Dim res As ListOfByte = Tsensor.Read(2)                 120:  0x8002   PushConstU10            2 (0x0002)
                                                                        121:  0x8C01   PushLocalRef            Tsensor
                                                                        122:  0x8001   PushConstU10            1 (0x0001)
                                                                        123:  0x00E0   I2cDeviceRead           
                                                                        124:  0x9404   PopLocalRef             res

000030          //Set Beacon Data
000031          //1-st byte Temperature
000032          // power off
000033          Device.DisableTempSensor()                              125:  0x8000   PushConstU10            0 (0x0000)
                                                                        126:  0x00F0   DeviceEnableTemp        

000034          If res = Nothing Then                                   127:  0x8C04   PushLocalRef            res
                                                                        128:  0x000E   PushNothing             
                                                                        129:  0x000A   RefCmpEQ                
                                                                        130:  0x3C07   BranchFalse             138

000035              res.AddByte(127)                                    131:  0x807F   PushConstU10            127 (0x007F)
                                                                        132:  0x8C04   PushLocalRef            res
                                                                        133:  0x00A3   ListAdd                 

000036              res.AddByte(127)                                    134:  0x807F   PushConstU10            127 (0x007F)
                                                                        135:  0x8C04   PushLocalRef            res
                                                                        136:  0x00A3   ListAdd                 

                                                                        137:  0x4009   Branch                  147
000037          Else                                                    

000038              temp = res(0).SignExtend()                          138:  0x8000   PushConstU10            0 (0x0000)
                                                                        139:  0x8C04   PushLocalRef            res
                                                                        140:  0x00B4   ListItemGet             
                                                                        141:  0x8000   PushConstU10            0 (0x0000)
                                                                        142:  0x0005   SignExtend              
                                                                        143:  0x9000   PopLocalI32             temp

000039              strTemp = temp.ToString()                           144:  0x8800   PushLocalI32            temp
                                                                        145:  0x0080   CvtIntToStr             
                                                                        146:  0x9402   PopLocalRef             strTemp

000040          End If
000041          //2-nd byte Humidity
000042          res.RemoveAt(1)                                         147:  0x8001   PushConstU10            1 (0x0001)
                                                                        148:  0x8C04   PushLocalRef            res
                                                                        149:  0x8001   PushConstU10            1 (0x0001)
                                                                        150:  0x00BA   ListRemoveRange         

000043          res.AddByte(0)                                          151:  0x8000   PushConstU10            0 (0x0000)
                                                                        152:  0x8C04   PushLocalRef            res
                                                                        153:  0x00A3   ListAdd                 

000044          //3-rd byte - Reserved
000045          res.AddByte(0)                                          154:  0x8000   PushConstU10            0 (0x0000)
                                                                        155:  0x8C04   PushLocalRef            res
                                                                        156:  0x00A3   ListAdd                 

000046          //4-th byte - Voltage in 32mV step
000047          battV = Device.BatteryVoltage()                         157:  0x00ED   DeviceBatteryVoltage    
                                                                        158:  0x9001   PopLocalI32             battV

000048          conv = battV.ToInteger()                                159:  0x8801   PushLocalI32            battV
                                                                        160:  0x9003   PopLocalI32             conv

000049          conv = conv >> 5                                        161:  0x8803   PushLocalI32            conv
                                                                        162:  0x8005   PushConstU10            5 (0x0005)
                                                                        163:  0x002F   IntShr                  
                                                                        164:  0x9003   PopLocalI32             conv

000050          bConv = conv.ToByte                                     165:  0x8803   PushLocalI32            conv
                                                                        166:  0x007D   CvtIntToByt             
                                                                        167:  0x9002   PopLocalI32             bConv

000051          res.AddByte(bConv)                                      168:  0x8802   PushLocalI32            bConv
                                                                        169:  0x8C04   PushLocalRef            res
                                                                        170:  0x00A3   ListAdd                 

000052          Lplan.SetBeaconData(res)                                171:  0x8C04   PushLocalRef            res
                                                                        172:  0x0016   PushConstMinus1         
                                                                        173:  0x0105   LplanSetBeacon          

000053          Lplan.SendBeacon()                                      174:  0x0104   LplanSendBeacon         

000054      End Event                                                   175:  0x0091   Return                  

000055  End Class                                                       85:   0x0097   ReturnMe                


****** BLOCKS and VARIABLES for MQTTTemp
    Block Class (Line 5:55)
        MQTTTemp        Me              (ReadOnly, Offset=0)
        Object          MyBase          (ReadOnly, Offset=0)
        Block Event Boot (Line 6:9)
        End Block
        Block Event PublishTemp (Line 11:54)
            ListOfByte      payload         (LocalRefTypVariableOffset=0)
            I2c             Tsensor         (LocalRefTypVariableOffset=1)
            Integer         temp            (LocalValTypVariableOffset=0)
            String          strTemp         (LocalRefTypVariableOffset=2)
            Short           battV           (LocalValTypVariableOffset=1)
            String          strbattV        (LocalRefTypVariableOffset=3)
            Byte            bConv           (LocalValTypVariableOffset=2)
            Integer         conv            (LocalValTypVariableOffset=3)
            ListOfByte      res             (LocalRefTypVariableOffset=4)
            Block If Then  (Line 34:37)
            End Block
            Block Else (Line 37:40)
            End Block
        End Block
        Total Size of Member data including base classes = 0.
    End Block




****** GLOBAL_VARIABLES **********************************************
Number, Class=Integer, Offset=0, IsReadoly, SourceClass=Intrinsic
Data, Class=Integer, Offset=4, IsReadoly, SourceClass=Intrinsic
ProgramCounter, Class=Integer, Offset=8, IsReadoly, SourceClass=Intrinsic


****** LITERALS ***********************************************
     1 String "True"
     4 String "False"
     7 String "\r\n"
